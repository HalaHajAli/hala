;/*FB_PKG_DELIM*/

__d("PolarisFeedActionScrolledToTop",[],(function(a,b,c,d,e,f){"use strict";function a(){return{type:"FEED_SCROLLED_TO_TOP"}}f.scrolledToTop=a}),66);
__d("PolarisNewPostsPill.react",["fbt","PolarisLogger","PolarisPill.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function a(a){var b=j(6),e=a.onClick;b[0]!==e?(a=function(){d("PolarisLogger").logAction("newPostsPillClick"),e()},b[0]=e,b[1]=a):a=b[1];a=a;var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f="xds687c xixxii4 x17qophe x1n327nk",b[2]=f):f=b[2];var g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__0iQ7o-ke_8i__JHASH__"),b[3]=g):g=b[3];b[4]!==a?(f=k.jsx("div",{className:f,children:k.jsx(c("PolarisPill.react"),{marginTop:2,onClick:a,children:g})}),b[4]=a,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("usePolarisRefreshFeedData",["PolarisFeedActionConstants","PolarisFeedActionRefreshFeedData","PolarisFeedLastHeadLoadContext","PolarisFeedSeenStateManagerSingleton","PolarisReactRedux","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.unstable_useMemoCache;function a(){var a=i(3),b=d("PolarisReactRedux").useDispatch(),e=d("PolarisFeedLastHeadLoadContext").useSetLastHeadLoadMs(),f;a[0]!==b||a[1]!==e?(f=function(a,f){a=a===void 0?d("PolarisFeedActionConstants").PAGE_SIZE:a;f=f===void 0?!1:f;var g=c("PolarisFeedSeenStateManagerSingleton").get();if(g.count()>0){var h=g.getViewInfo();g.clear();b(d("PolarisFeedActionRefreshFeedData").refreshFeedData(a,f,h))}else b(d("PolarisFeedActionRefreshFeedData").refreshFeedData(a,f));e(Date.now())},a[0]=b,a[1]=e,a[2]=f):f=a[2];return f}g["default"]=a}),98);
__d("PolarisLightweightNewPostsPill.react",["CometRouteParams","InstagramODS","PolarisFeedActionScrolledToTop","PolarisFeedVariants","PolarisNewPostsPill.react","PolarisNewPostsPillActions","PolarisReactRedux","XPolarisFeedControllerRouteBuilder","polarisNewPostsPillSelectors","react","useCometRouterDispatcher","usePolarisLightweightNewPostsPillCheck","usePolarisRefreshFeedData"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.useRef,l=b.unstable_useMemoCache;function a(a){var b=l(28),e=a.alwaysUseCometDispatch,f=a.scrollToTopElement,g=d("PolarisReactRedux").useSelector(d("polarisNewPostsPillSelectors").checkHasNewPosts),h=d("PolarisReactRedux").useSelector(d("polarisNewPostsPillSelectors").getDocumentVisibilityHiddenTimestamp);a=d("CometRouteParams").useRouteParams();var m=a.variant,n=c("useCometRouterDispatcher")(),o=d("PolarisReactRedux").useDispatch(),p=c("usePolarisLightweightNewPostsPillCheck")(),q=k(!0),r=c("usePolarisRefreshFeedData")();b[0]!==p||b[1]!==h||b[2]!==o?(a=function(){if(document.visibilityState==="visible")p(h);else{var a=Date.now();o(d("PolarisNewPostsPillActions").setDocumentVisibilityHiddenTimestamp(a))}},b[0]=p,b[1]=h,b[2]=o,b[3]=a):a=b[3];var s=a;b[4]!==o||b[5]!==e||b[6]!==m||b[7]!==n||b[8]!==f||b[9]!==r?(a=function(){c("InstagramODS").incr("web.feed.lightweight_new_posts_pill.triggered");o(d("PolarisNewPostsPillActions").setNewPostsPillVisibility(!1));if(e===!0||m!=null&&c("PolarisFeedVariants").cast(String(m))!=="home"){var a=c("XPolarisFeedControllerRouteBuilder").buildURL({}),b={refreshFeed:!0};n==null?void 0:n.go(a,{passthroughProps:b});return}f?f.scrollIntoView():window.scrollTo(0,0);o(d("PolarisFeedActionScrolledToTop").scrolledToTop());r()},b[4]=o,b[5]=e,b[6]=m,b[7]=n,b[8]=f,b[9]=r,b[10]=a):a=b[10];var t=a;b[11]!==g||b[12]!==t?(a=function(){g===!0&&window.scrollY===0&&t()},b[11]=g,b[12]=t,b[13]=a):a=b[13];var u=a,v;b[14]!==s||b[15]!==u?(a=function(){document.addEventListener("visibilitychange",s);document.addEventListener("scroll",u);return function(){document.removeEventListener("visibilitychange",s),document.removeEventListener("scroll",u)}},v=[s,u],b[14]=s,b[15]=u,b[16]=a,b[17]=v):(a=b[16],v=b[17]);j(a,v);b[18]!==g||b[19]!==t?(a=function(){q.current===!0&&(q.current=!1,g===!0&&t())},b[18]=g,b[19]=t,b[20]=a):a=b[20];b[21]!==p||b[22]!==g||b[23]!==t?(v=[p,g,t],b[21]=p,b[22]=g,b[23]=t,b[24]=v):v=b[24];j(a,v);b[25]!==g||b[26]!==t?(a=g?i.jsx(c("PolarisNewPostsPill.react"),{onClick:t}):null,b[25]=g,b[26]=t,b[27]=a):a=b[27];return a}g["default"]=a}),98);